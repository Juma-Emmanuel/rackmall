 <!DOCTYPE html>
<html>
    <head>
        <title></title>
    </head>
    <body>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <label for="title">Title:</label>
    <input type="text" name="title" required>
    <br>
    <label for="description">Description:</label>
    <textarea name="description" required></textarea>
    <br>
    <label for="image">Image:</label>
   <!-- <input type="file" name="image"> -->
   <input type="file" name="files[]" id = "files">
   <input type="hidden" name="url" id="url">
   <button type="button" onclick="uploadimage()">upload</button>
    <br>
    <button type="submit">Post Data</button>

</form>
</body>
<script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
<script>
    
    var config = {
    apiKey: "AIzaSyAAxb2N1Ie7cRBzyrTnykjTacB5_IqlefY",
    authDomain: "racket-data.firebaseapp.com",
    databaseURL: "https://racket-data-default-rtdb.firebaseio.com",
    projectId: "racket-data",
    storageBucket: "racket-data.appspot.com",
    messagingSenderId: "1025185944579",
    appId: "1:1025185944579:web:8128536f6b534cad0f6a36"
  };

  // Initialize Firebase
  firebase.initializeApp(config);

  function uploadimage(){
  var storage = firebase.storage();

  var file = document.getElementById("files").files[0];
  var storageRef = storage.ref();
  var thisref = storageRef.child(file.name).put(file);
  thisref.on('state_changed',function(snapshot){
    console.log("file uploaded succesfully");
  },
  function(error){

  }, 
   function(){
    var downloadURL = thisref.snapshot.downloadURL;
    console.log("got url");
    alert("file uploaded succesfully")
   });
  }

</script>
</html>
<!--
<!DOCTYPE html>
<html>
<head>
  <title>Upload an Image to Firebase</title>
</head>
<body>
    <input type="file" id="imageFile" />
    <button onclick="uploadImage()">Upload Image</button>
    <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js"></script>
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyAAxb2N1Ie7cRBzyrTnykjTacB5_IqlefY",
        authDomain: "racket-data.firebaseapp.com",
        databaseURL: "https://racket-data-default-rtdb.firebaseio.com",
    projectId: "racket-data",
    storageBucket: "gs://racket-data.appspot.com",
    messagingSenderId: "1025185944579",
    appId: "1:1025185944579:web:8128536f6b534cad0f6a36"
      };
      firebase.initializeApp(firebaseConfig);
    
      function uploadImage() {
        // Get the storage reference
        const storage = firebase.storage();
    
        // Get the image file
        const imageFileInput = document.getElementById('imageFile');
        const imageFile = imageFileInput.files[0];
    
        if (imageFile) {
          // Upload the image file
          const uploadTask = storage.ref('images/' + imageFile.name).put(imageFile);
    
          // Listen for the upload state changes
          uploadTask.on('state_changed',
            (snapshot) => {
              switch (snapshot.state) {
                case 'paused':
                  console.log('Upload paused');
                  break;
                case 'running':
                  console.log('Uploading in progress...');
                  break;
              }
            },
            (error) => {
              console.log('Upload failed:', error);
            },
            () => {
              // Upload completed successfully
              console.log('Upload successful!');
              
              // Get the download URL
              uploadTask.snapshot.ref.getDownloadURL().then((downloadUrl) => {
                console.log('Download URL:', downloadUrl);
              });
            }
          );
        } else {
          console.error('No image file selected.');
        }
      }
    </script>
    
</body>
</html>-->

